(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{213:function(t,a,s){"use strict";s.r(a);var e=s(0),r=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vuepress-github-travisci-持续部署个人网站"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuepress-github-travisci-持续部署个人网站","aria-hidden":"true"}},[t._v("#")]),t._v(" VuePress+GitHub+TravisCI 持续部署个人网站")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://v1.vuepress.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("VuePress 1.x 静态网站生成器"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub 开源及私有软件项目的托管平台"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://travis-ci.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("TravisCI 开源持续集成构建项目"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"github-准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#github-准备","aria-hidden":"true"}},[t._v("#")]),t._v(" GitHub 准备")]),t._v(" "),s("p",[t._v("如果不想缴费那就GitHub上需要需要创建两个repo，一个存放文档工程，作为GitHub Page源。")]),t._v(" "),s("h3",{attrs:{id:"注册github账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注册github账号","aria-hidden":"true"}},[t._v("#")]),t._v(" 注册GitHub账号")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/join",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/join"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-regisit.jpg",alt:"github-regisit"}})]),t._v(" "),s("p",[t._v("创建完成之后登陆GitHub")]),t._v(" "),s("h3",{attrs:{id:"创建文档工程仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建文档工程仓库","aria-hidden":"true"}},[t._v("#")]),t._v(" 创建文档工程仓库")]),t._v(" "),s("p",[t._v("创建文档工程仓库，在此工程里进行文档编写工作")]),t._v(" "),s("h4",{attrs:{id:"点击右上角-new-repository"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#点击右上角-new-repository","aria-hidden":"true"}},[t._v("#")]),t._v(" 点击右上角"),s("code",[t._v("+")]),t._v("--"),s("code",[t._v("new repository")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-new-repo.jpg",alt:"github-new-repo.jpg"}})]),t._v(" "),s("p",[t._v("创建名为仓库，比如叫做"),s("code",[t._v("doc-test")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-new-repo-doc.jpg",alt:"github-new-repo-doc.jpg"}})]),t._v(" "),s("p",[t._v("点击按钮"),s("code",[t._v("create repository")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-new-repo-doc-finish.jpg",alt:"github-new-repo-doc-finish.jpg"}})]),t._v(" "),s("p",[t._v("创建完成之后先不用初始化，等一下通过我们创建的本地工程进行初始化。")]),t._v(" "),s("h3",{attrs:{id:"创建-username-github-io仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建-username-github-io仓库","aria-hidden":"true"}},[t._v("#")]),t._v(" 创建<username>.github.io仓库")]),t._v(" "),s("p",[t._v("以我个人的账号"),s("code",[t._v("youlingred")]),t._v("为例")]),t._v(" "),s("p",[t._v("同上，创建仓库，仓库名为 "),s("code",[t._v("youlingred.github.io")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-new-repo-io.jpg",alt:"github-new-repo-io.jpg"}})]),t._v(" "),s("p",[t._v("勾选"),s("code",[t._v("Initialize this repository with a README")])]),t._v(" "),s("p",[t._v("点击按钮"),s("code",[t._v("create repository")]),t._v("创建完成")]),t._v(" "),s("h3",{attrs:{id:"添加-ssh-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加-ssh-key","aria-hidden":"true"}},[t._v("#")]),t._v(" 添加 SSH key")]),t._v(" "),s("p",[t._v("点击左上角用户头像，点击"),s("code",[t._v("setting")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-ssh-key-enter.jpg",alt:"github-ssh-key-enter.jpg"}})]),t._v(" "),s("p",[t._v("点击"),s("code",[t._v("SSH and GPG keys")]),t._v("--\x3e "),s("code",[t._v("New SSH key")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-ssh-key-add.jpg",alt:"github-ssh-key-add.jpg"}})]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("如何生成SSH key，去"),s("a",{attrs:{href:"https://www.jianshu.com/p/259773014e03",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1),t._v("查看")])]),t._v(" "),s("h3",{attrs:{id:"生成github-token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生成github-token","aria-hidden":"true"}},[t._v("#")]),t._v(" 生成GITHUB_TOKEN")]),t._v(" "),s("p",[t._v("我们这里先生成token，下面会用到")]),t._v(" "),s("p",[t._v("点击左上角用户头像，点击"),s("code",[t._v("setting")]),t._v("，选择左侧菜单")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-tocken.jpg",alt:"github-tocken.jpg"}})]),t._v(" "),s("p",[t._v("选择"),s("code",[t._v("Personal access tokens")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-tocken-gen.jpg",alt:"github-tocken-gen.jpg"}})]),t._v(" "),s("p",[t._v("点击"),s("code",[t._v("Generate new tocken")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-tocken-fill.jpg",alt:"github-tocken-fill.jpg"}})]),t._v(" "),s("p",[t._v("生成的token，一定要拷贝，保存起来")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-tocken-copy.jpg",alt:"github-tocken-copy.jpg"}})]),t._v(" "),s("h2",{attrs:{id:"vuepress-搭建文档工程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuepress-搭建文档工程","aria-hidden":"true"}},[t._v("#")]),t._v(" VuePress 搭建文档工程")]),t._v(" "),s("h3",{attrs:{id:"环境配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 环境配置")]),t._v(" "),s("p",[t._v("安装"),s("a",{attrs:{href:"http://nodejs.cn/download/",target:"_blank",rel:"noopener noreferrer"}},[t._v("NodeJS"),s("OutboundLink")],1),t._v(","),s("a",{attrs:{href:"https://git-scm.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("安装cnpm淘宝镜像")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -g cnpm --registry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npm.taobao.org\n")])])]),s("h3",{attrs:{id:"创建工程文件夹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建工程文件夹","aria-hidden":"true"}},[t._v("#")]),t._v(" 创建工程文件夹")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 新建文件夹doc-test")]),t._v("\n$ md doc-test\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进入doc-test目录")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cd")]),t._v(" doc-test\n")])])]),s("h3",{attrs:{id:"工程初始化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#工程初始化","aria-hidden":"true"}},[t._v("#")]),t._v(" 工程初始化")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm初始化工程，生成package.json文件")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init\n")])])]),s("h3",{attrs:{id:"安装vuepress-1-x"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装vuepress-1-x","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装Vuepress 1.x")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装Vuepress")]),t._v("\n$ cnpm i vuepress@next -D\n")])])]),s("h3",{attrs:{id:"修改package-json脚本scripts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改package-json脚本scripts","aria-hidden":"true"}},[t._v("#")]),t._v(" 修改"),s("code",[t._v("package.json")]),t._v("脚本"),s("code",[t._v("scripts")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuepress dev docs"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuepress build docs"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"添加基础文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加基础文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 添加基础文件")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 新建文件夹docs")]),t._v("\n$ md docs\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 新建一个 markdown 文件")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'# Hello VuePress!'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" docs/README.md\n")])])]),s("h3",{attrs:{id:"本地运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地运行","aria-hidden":"true"}},[t._v("#")]),t._v(" 本地运行")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n")])])]),s("p",[t._v("可以看到网站运行了")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/web-run.jpg",alt:"web-run.jpg"}})]),t._v(" "),s("h3",{attrs:{id:"初始化文档工程仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化文档工程仓库","aria-hidden":"true"}},[t._v("#")]),t._v(" 初始化文档工程仓库")]),t._v(" "),s("p",[t._v("工程创建好了，那么我们现在就用工程初始化git仓库")]),t._v(" "),s("p",[t._v("现添加"),s("code",[t._v(".gitignore")]),t._v("忽略文件，文件内容如下")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("**/.idea\n**/.DS_Store\n**/.vscode\n**/dist\n**/node_modules\nnpm-debug.log*\nyarn-debug.log*\nyarn-error.log*\n\n")])])]),s("p",[t._v("接着继续初始化工程")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git初始化")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加文件版本控制")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" --all\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提交到本地仓库")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'init'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加remote地址 git@github.com:youlingred/doc-test.git 替换成你自己的地址")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" remote "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" origin git@github.com:youlingred/doc-test.git\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 推送到远程仓库")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push --set-upstream origin master\n")])])]),s("p",[t._v("远程仓库初始化")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/github-init.jpg",alt:"github-init.jpg"}})]),t._v(" "),s("h2",{attrs:{id:"持续部署配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#持续部署配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 持续部署配置")]),t._v(" "),s("h3",{attrs:{id:"添加travis-yml-部署文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加travis-yml-部署文件","aria-hidden":"true"}},[t._v("#")]),t._v(" 添加"),s("code",[t._v("travis.yml")]),t._v(" 部署文件")]),t._v(" "),s("p",[t._v("进入本地工程目录，新建"),s("code",[t._v("travis.yml")]),t._v("，写入下面文件内容")]),t._v(" "),s("p",[t._v("这里我们将用到之前保存的"),s("a",{attrs:{href:"#%E7%94%9F%E6%88%90github-token"}},[t._v("GITHUB_TOKEN")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("language: node_js\nnode_js:\n  - lts/*\nbranches:\n  only:\n    - master\nscript:\n  - "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\ndeploy:\n  provider: pages\n  skip-cleanup: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  local_dir: docs/.vuepress/dist\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 要推送到的git仓库地址，替换成你自己的xxx/xxx.github.io")]),t._v("\n  repo: youlingred/youlingred.github.io\n  target_branch: master\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# $GITHUB_TOCKEN 替换成我们上面保存的GITHUB_TOKEN")]),t._v("\n  github-token: "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$GITHUB_TOCKEN")]),t._v("\n  keep-history: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  on:\n    branch: master\n\n")])])]),s("h3",{attrs:{id:"通过github账号登录travisci"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过github账号登录travisci","aria-hidden":"true"}},[t._v("#")]),t._v(" 通过GitHub账号登录"),s("a",{attrs:{href:"https://travis-ci.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("TravisCI"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/travis-login.jpg",alt:"login"}})]),t._v(" "),s("h3",{attrs:{id:"进入setting页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进入setting页面","aria-hidden":"true"}},[t._v("#")]),t._v(" 进入"),s("code",[t._v("setting")]),t._v("页面")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/travis-set.jpg",alt:"setting"}})]),t._v(" "),s("h3",{attrs:{id:"选择并添加需要构建的仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选择并添加需要构建的仓库","aria-hidden":"true"}},[t._v("#")]),t._v(" 选择并添加需要构建的仓库")]),t._v(" "),s("p",[t._v("点击"),s("code",[t._v("Manage repositories on GitHub")]),t._v("配置需要部署的工程")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/travis-add-repo-select.jpg",alt:"travis-add-repo-select.jpg"}})]),t._v(" "),s("p",[t._v("就可以看到我们的仓库已经添加到travis工程部署列表了")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/travis-add-repo-result.jpg",alt:"travis-add-repo-result.jpg"}})]),t._v(" "),s("h3",{attrs:{id:"测试自动部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试自动部署","aria-hidden":"true"}},[t._v("#")]),t._v(" 测试自动部署")]),t._v(" "),s("p",[t._v("提交"),s("code",[t._v("doc-test")]),t._v("更新")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入doc-test工程目录")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cd")]),t._v(" doc-test\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加文件版本控制")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" --all\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提交到本地仓库")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'init'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 推送到远程仓库")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push\n")])])]),s("p",[t._v("进入"),s("code",[t._v("travis")]),t._v("看板")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/travis-dashboard.jpg",alt:"travis-dashboard.jpg"}})]),t._v(" "),s("p",[t._v("点击要查看的项目")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/travis-dashboard-list.jpg",alt:"travis-dashboard-list.jpg"}})]),t._v(" "),s("p",[t._v("查看部署细节")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/travis-dashboard-view.jpg",alt:"travis-dashboard-view.jpg"}})])])},[],!1,null,null,null);a.default=r.exports}}]);