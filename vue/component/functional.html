<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>函数式组件 | 边缘</title>
    <meta name="description" content="Just playing around">
    <link rel="icon" href="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.f142a733.css" as="style"><link rel="preload" href="/assets/js/app.7c837f06.js" as="script"><link rel="preload" href="/assets/js/2.f49325b0.js" as="script"><link rel="preload" href="/assets/js/30.44013d99.js" as="script"><link rel="prefetch" href="/assets/js/10.f3794eef.js"><link rel="prefetch" href="/assets/js/11.13e7c8f2.js"><link rel="prefetch" href="/assets/js/12.99425642.js"><link rel="prefetch" href="/assets/js/13.e09b82a3.js"><link rel="prefetch" href="/assets/js/14.5464a54d.js"><link rel="prefetch" href="/assets/js/15.6bc0c644.js"><link rel="prefetch" href="/assets/js/16.a8e8da60.js"><link rel="prefetch" href="/assets/js/17.ff2f5eff.js"><link rel="prefetch" href="/assets/js/18.2809f229.js"><link rel="prefetch" href="/assets/js/19.98a36928.js"><link rel="prefetch" href="/assets/js/20.b57979e8.js"><link rel="prefetch" href="/assets/js/21.bfd7521e.js"><link rel="prefetch" href="/assets/js/22.e478399c.js"><link rel="prefetch" href="/assets/js/23.d3c7f61a.js"><link rel="prefetch" href="/assets/js/24.c46b97f1.js"><link rel="prefetch" href="/assets/js/25.a0a5a8e0.js"><link rel="prefetch" href="/assets/js/26.19a1d5ce.js"><link rel="prefetch" href="/assets/js/27.3dbc4700.js"><link rel="prefetch" href="/assets/js/28.7a35f37c.js"><link rel="prefetch" href="/assets/js/29.367143fb.js"><link rel="prefetch" href="/assets/js/3.fc0e6947.js"><link rel="prefetch" href="/assets/js/31.788db9ae.js"><link rel="prefetch" href="/assets/js/4.2ca7c99c.js"><link rel="prefetch" href="/assets/js/5.5cdb8ce1.js"><link rel="prefetch" href="/assets/js/6.5ef8c301.js"><link rel="prefetch" href="/assets/js/7.93e42f03.js"><link rel="prefetch" href="/assets/js/8.fb37d7f6.js"><link rel="prefetch" href="/assets/js/9.9b179377.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f142a733.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">边缘</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vue/" class="nav-link router-link-active">VUE</a></div><div class="nav-item"><a href="/package-manage/" class="nav-link">包管理</a></div><div class="nav-item"><a href="/packtool/" class="nav-link">工程打包</a></div><div class="nav-item"><a href="/cicd/" class="nav-link">CI/CD</a></div><div class="nav-item"><a href="/branch-manage/" class="nav-link">分支管理</a></div><div class="nav-item"><a href="/npm-packages/" class="nav-link">NPM常用库</a></div><div class="nav-item"><a href="/ide/" class="nav-link">IDE</a></div><div class="nav-item"><a href="/resource/" class="nav-link">资源整理</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/vue/" class="nav-link router-link-active">VUE</a></div><div class="nav-item"><a href="/package-manage/" class="nav-link">包管理</a></div><div class="nav-item"><a href="/packtool/" class="nav-link">工程打包</a></div><div class="nav-item"><a href="/cicd/" class="nav-link">CI/CD</a></div><div class="nav-item"><a href="/branch-manage/" class="nav-link">分支管理</a></div><div class="nav-item"><a href="/npm-packages/" class="nav-link">NPM常用库</a></div><div class="nav-item"><a href="/ide/" class="nav-link">IDE</a></div><div class="nav-item"><a href="/resource/" class="nav-link">资源整理</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/vue/component/component/" class="sidebar-heading clickable open"><span>组件</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue/component/functional.html" class="active sidebar-link">函数式组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/component/functional.html#特征" class="sidebar-link">特征</a></li><li class="sidebar-sub-header"><a href="/vue/component/functional.html#构造" class="sidebar-link">构造</a></li><li class="sidebar-sub-header"><a href="/vue/component/functional.html#场景" class="sidebar-link">场景</a></li><li class="sidebar-sub-header"><a href="/vue/component/functional.html#举例" class="sidebar-link">举例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue/component/functional.html#第一步-实现通过type自动渲染相应类型的组件" class="sidebar-link">第一步 实现通过type自动渲染相应类型的组件</a></li></ul></li></ul></li><li><a href="/vue/component/dynamic.html" class="sidebar-link">动态组件</a></li><li><a href="/vue/component/async.html" class="sidebar-link">异步组件</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="函数式组件"><a href="#函数式组件" aria-hidden="true" class="header-anchor">#</a> 函数式组件</h1> <p>它只是一个接受一些 prop 的函数</p> <h2 id="特征"><a href="#特征" aria-hidden="true" class="header-anchor">#</a> 特征</h2> <ul><li>没有管理任何状态</li> <li>没有监听任何传递给它的状态</li> <li>没有生命周期方法</li> <li>没有<code>this</code>上下文</li></ul> <p>组件需要的一切都是通过 <code>context</code> 参数传递，它是一个包括如下字段的对象：</p> <ul><li><code>props</code>：提供所有 prop 的对象</li> <li><code>children</code>: VNode 子节点的数组</li> <li><code>slots</code>: 一个函数，返回了包含所有插槽的对象</li> <li><code>scopedSlots</code>: (2.6.0+) 一个暴露传入的作用域插槽的对象。也以函数形式暴露普通插槽。</li> <li><code>data</code>：传递给组件的整个<a href="https://cn.vuejs.org/v2/guide/render-function.html#%E6%B7%B1%E5%85%A5-data-%E5%AF%B9%E8%B1%A1" target="_blank" rel="noopener noreferrer">数据对象<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，作为 <code>createElement</code> 的第二个参数传入组件</li> <li><code>parent</code>：对父组件的引用</li> <li><code>listeners</code>: (2.3.0+) 一个包含了所有父组件为当前组件注册的事件监听器的对象。这是 <code>data.on</code> 的一个别名。</li> <li><code>injections</code>: (2.3.0+) 如果使用了 <a href="https://cn.vuejs.org/v2/api/#provide-inject" target="_blank" rel="noopener noreferrer"><code>inject</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 选项，则该对象包含了应当被注入的属性。</li></ul> <p>在添加 <code>functional: true</code> 之后，需要更新我们的锚点标题组件的渲染函数，为其增加 <code>context</code> 参数，并将 <code>this.$slots.default</code> 更新为 <code>context.children</code>，然后将 <code>this.level</code> 更新为 <code>context.props.level</code>。</p> <h2 id="构造"><a href="#构造" aria-hidden="true" class="header-anchor">#</a> 构造</h2> <p>标记<code>functional</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'my-component'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  functional<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// Props 是可选的</span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 为了弥补缺少的实例</span>
  <span class="token comment">// 提供第二个参数作为上下文</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">createElement<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>或</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">functional</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="场景"><a href="#场景" aria-hidden="true" class="header-anchor">#</a> 场景</h2> <ul><li>程序化地在多个组件中选择一个来代为渲染；</li> <li>在将 children、props、data 传递给子组件之前操作它们</li></ul> <p>例如:</p> <ul><li>封装form表单，自动解析使用哪个表单元素渲染子元素，<code>Select</code>、<code>Input</code>、<code>Checkbox</code>等等</li> <li>实现table表格组件的render渲染函数，</li></ul> <h2 id="举例"><a href="#举例" aria-hidden="true" class="header-anchor">#</a> 举例</h2> <p>下面我们实现一个机遇<a href="https://www.iviewui.com/" target="_blank" rel="noopener noreferrer">iview<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的表单组件的封装,通过解析data数据自动生成表单，数据中包含事件绑定和处理</p> <h3 id="第一步-实现通过type自动渲染相应类型的组件"><a href="#第一步-实现通过type自动渲染相应类型的组件" aria-hidden="true" class="header-anchor">#</a> 第一步 <code>实现通过type自动渲染相应类型的组件</code></h3> <p>首先在同一文件下创建以下两个文件，组件文件<code>functonal-component.vue</code>和页面文件<code>demo.vue</code>
创建<code>functonal-component.vue</code>文件</p> <div class="language-flow js extra-class"><pre class="language-flow"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span><span class="token string">'FunctionalComponent'</span><span class="token punctuation">,</span>
  functional<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
  props<span class="token punctuation">:</span><span class="token punctuation">{</span>
    <span class="token keyword">type</span><span class="token punctuation">:</span><span class="token punctuation">{</span>
      <span class="token keyword">type</span><span class="token punctuation">:</span><span class="token type tag">String</span><span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token string">'Input'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span> <span class="token punctuation">(</span>h<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">h</span><span class="token punctuation">(</span>
      ctx<span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token keyword">type</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>说明：</p> <ul><li><code>functional:true</code>声明该组件为函数式组件</li> <li><code>props.type</code>要使用的props属性要显示的声明，否则无法通过<code>ctx.props.xxx</code>获取到
创建<code>demo.vue</code>文件</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FunctionalComponent</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item,index in demo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> FunctionalComponent <span class="token keyword">from</span> <span class="token string">'./FunctionalComponent.vue'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Demo'</span><span class="token punctuation">,</span>
    components<span class="token punctuation">:</span> <span class="token punctuation">{</span>FunctionComponent<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span>
           demo<span class="token punctuation">:</span><span class="token punctuation">[</span>
             <span class="token punctuation">{</span>
               type<span class="token punctuation">:</span><span class="token string">'Select'</span>
             <span class="token punctuation">}</span><span class="token punctuation">,</span>
             <span class="token punctuation">{</span>
                type<span class="token punctuation">:</span><span class="token string">'Input'</span>
              <span class="token punctuation">}</span>
           <span class="token punctuation">]</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/3/2019, 2:17:58 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/vue/component/dynamic.html">
          动态组件
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7c837f06.js" defer></script><script src="/assets/js/2.f49325b0.js" defer></script><script src="/assets/js/30.44013d99.js" defer></script>
  </body>
</html>
